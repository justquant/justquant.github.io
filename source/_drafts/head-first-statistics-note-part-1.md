---
title: Head First Statistics笔记
tags: 统计学
---

> 对于自己专业的书，再困难也要花时间读懂它

# 第一章 神奇的图表

- 统计的定义：统计是一组能够解释事实的数字或者一组有意义的图表。
- 天使与魔鬼：统计能够揭示事实，但是也会撒谎。你应该学会区分。
- 粉饰太平：同样的数字，用图表表示，却可以给人截然不同的感受。(纵轴以0和以2为起点)

Month | Jul | Aug | Sep | Oct | Nov | Dec
----- | --- | --- | --- | --- | --- |---
Profile|2.0|2.1|2.2|2.1|2.3|2.4

- 饼图（Pie chart）：让你一眼看出最大的占比。各组比例之和为100%。用在各组数字之间的差距比较大时。
- 条形图(Bar chart)：可以对比细微的差距。特别适合用在当各种数字比较接近时。
    - 纵向：最常用。可以显示类别和数量化的数据。
    - 横向：可以有足够的空间显示坐标。当条形图的坐标很多时，或者某个坐标的名字很长时。往往用于显示类别数据。
    - 可以叠加在一起（横向叠加或者纵向叠加）
- 数据有两种类型：
    - 数字的（Numeric, quantitavie）。坐标可以表示为数字，用直方图(histogram）方表示。
    - 类别的（Categorical, qualitative）。可用饼图或者条形图。

- 条形图和直方图的区别

条形图 | 直方图
----- | ------
柱状间有间隔 | 无间隔
宽度一致    | 宽度是横坐标的范围
表示类别数据    | 表示数字数据

- 画直方图的要领
    - 当横坐标的跨度一样时（例如：0-99,100 - 199），直方图的高度就是数值。
    - 当横坐标的跨度不一样时，需要把数值除以跨度，作为直方图的高度。

Hours | Frequencey | Width
----- | ---------- | -----
0-1 | 4300 | 1
1-3 | 3600 | 2
3-5 | 4900 | 2
5-10| 4500 | 5
10-24|2100 | 14

- 折线图（Line chart）

    - 用于显示趋势
    - 用于显示累加的结果
    - 不应该用于显示分类数据（日期除外）

# 第二章 度量中点

*中心，不止一个。*

- 为什么不叫Average，是因为Average是一个泛指。使用具体的词汇更加精确。
- 3M - Mean(平均值)，Median（中值），Mode（众数）
- Mean 平均数：所有数的总和除以总个数。计算平均数要避免极值的影响。
- Median 中值。将所有数按照从小到大排列，位于最中间的数。如果总个数为偶数，那么取最中间的两个数的Mean。
- Mode 众数。数列中出现次数最多的数。
    - 可以多个值。
    - 可以用于类别数据
- 一般来说，我们对一个数列进行统计，三种中值都最好用上。

# 第三章 度量变化和差异

*均值只是告诉你故事的一小部分。*

- 跨度（Range）：最大值减去最小值。描述了数据的宽度。
- 箱线图（Box-and-whisker-plot）: 显示最大值，最小值，中位数，以及四分边界
![箱线图](/images/interquartile.png)

- 跨度以及由此衍生出来的箱线图都是一种度量差距的方式，他们很简单但是并不能全面的描述数据的分布特征。（最终答案：方差(Variance)，标准差(Standard deviation)）
- 方差是所有数字到他们的均值的距离的平方，由于单位的不同，有时候不太方便比较和计算
- 标准差由于统一了单位，因此往往作为度量数据分散程度的手段
- 方差的定义展开后，简化为以下形式。这种形式支持迭代的方式计算。
![方差的计算公式](/images/variance_formula.png)
- 标准分数（z-scores): 一个数字减去平均数的差，再除以标准差。标准分数为比较不同的数据集提供了一个基准。*但是标准分数高，不意味着表现绝对最好，而是说相对自己而言更好。*

_例子：_ 在期末考试中，小明的语文考了75分，数学考了60.小明所在班级的语文平均分为80，标准差为20；数学平均分为65，标准差为25，那么对于小明自己而言，语文的z-score为：(70 - 80) / 20 = -0.5,
数学的z-scores为 (60 - 65) / 25 = -0.2,  相对小明自己而言，小明的数学比语文考得好。

# 第四章 概率

*生活充满了变数*

- 概率只是计算一个事情发生的可能性。并不能担保事情一定会发生。反之，即使只有0.00001的可能性也可能发生。
- 概率是可以计算的。通过计算开率，人们能够做出“合理”的决策。这里的合理，是指纯理性的，与情感无关。
- 概率的衡量：0 到 1之间的一个数字。0代表不会发生，1代表一定会发生。
- 基本定理: P(A) = N(A) / N(S). P(A)是概率。N(A) 代表A发生的次数，S(A) 代表样本空间，也即所有事件的总数。
- 韦恩图：可以形象的表示两个概率事件的交集、并集、互补。
![韦恩图](/images/probability_venn_diagram.png)
- 互补事件的概率之和为1. P(A) + P(A') = 1. 有时候我们不能够直接算出，后者需要非常复杂的计算得到一个事件的概率，但是可以通过算出其互补时间的概率间接得出。
- 互斥事件：两个事件不可能同时发生。也就是 P（A and B) = 0
- 独立事件和非独立事件：
    - 隐含场景：先后发生。也就是在两次观察中
    - 独立事件是指两件事的发生不会相互影响。例如在轮盘游戏中，上一次押注的结果不会影响下一次。（总样本不变）
    - 非独立事件是指第一件事的发生会对接下来的事件产生影响。例如抽奖，每次从抽奖箱里抽出一张彩票，都会接下来抽中的概率产生影响。（总样本在减少）
    - 如何判定两件事的发生是否独立？ ---- 看是否对总样本造成影响。
- 在一次观察中发生A or B的概率 P(A or B) = P(A) + P(B) - P(A and B)。例子：轮盘停在黑色或者是偶数的格子的概率。
    - 如果A和B是相互独立的，那么 P(A)
- 条件概率：P(A|B) 在B确定发生的情况下，求A发生的概率。从韦恩图很好推断：P(A|B) = P(A and B)/P(B), P(B)是样本空间，P(A and B)是发生的次数。
    - 贝叶斯定理：
        ![贝叶斯定理](/images/bayes_theorem.png)
    - 当A、B互相独立时，P(A | B) = P(A)。例子：轮盘第一次出现黑色，并不会影响第二次出现红色的概率。由此可以推断出 P(A and B) = P(A) * P(B)。例子：第一次出现黑色而且第二次出现红色的概率
    - 当A、B互斥是，P(A|B) = 0
![概率树](/images/probability_tree.png)

- 计算事件发生的概率之葵花宝典：
    1. 首先判别待求解的事件是发生在一次观察中，还是两次观察中。
    2. 如果是在一次观察中：区分是否互斥事件、互补事件。判定是否有条件限定（条件概率）。
    3. 如果是在两次（以上）观察中：区分是否独立事件

# 第五章 离散概率分布

*当意想不到的事情发生时，后果会很严重，你需要把它管理起来*

- 概率告诉我们一件事情发生的概率，但是它无法告诉我们一旦发生之后，后果有多严重。
- 通过概率分布，你可以算出一个最终的期望值。这个期望值就是符合某个概率分布的时间多次发生时，你能够得到的最终结果。
![概率分布期望值计算公式](/images/probability_expectation.png)
- 概率分布被广泛应用于赌场设计赔率。如果计算一下，可以发现所有的赌场里面的游戏，期望值都是负数。赌场正式凭借这种哪怕很细微的优势，通过无数次的赌局，最终获得盈利。可是，明明知道会输，人们为什么会参加赌局呢？
  期望值为负，可以让赌客久赌必输。可是对于单次赌博，却有可能大赢。赌场正式不时宣传这种赢大钱的幸运儿而去吸引更多的人。这里面有一个数学概念，那就是概率分布的方差。
- 和一个数列类似，概率分布也有方差和标准差的概念。概率分布的方差可以算出实际出现的结果对于期望值的偏离程度。概率分布的标准差类似数列的标准差。对概率分布的方差开方就得到概率分布的标准差。
![概率分布方差计算公式](/images/probability_dist_variance.png)
- 概率分布期望值和方差线性转换公式：
    E(aX + b) = aE(X) + b
    Var(aX + b) = a^2 * Var(X)
    E(X – Y) = E(X) – E(Y)
    Var(X – Y) = Var(X) + Var(Y)
    E(aX + bY) = aE(X) + bE(Y)
    Var(aX + bY) = a^2 * Var(X) + b^2 * Var(Y)

- 线性转换公式只对离散概率分布有效，对于连续的概率分布不适用。

# 第六章 排列组合

*有时候，顺序很重要*

这一章节主要解决了几个排列和组合的问题：
1. 全排列：分组和不分组；顺序相关和无关
2. 部分排列：顺序相关和无关
3. 事实上全排列和部分排列是统一的。“全排列”就是包含所有的“部分”。只是 因为公式可以简化，所以分开记忆。

- 排列是顺序相关的；而组合与顺序无关
- n个物体，如果排成一条直线，那么有n！种组合。n! = n * (n - 1) * ... * 2 * 1
- n个物体，如果排成给一个圈，并且没有对圆圈的位置进行标记，那么有 (n - 1)!中组合
- n个物体，如果排成一个圈，但是有进行位置标记，那么问题和排成一条直线的情况一样。
- 情况1：不考虑分组，n个物体的排列总共有 n! 中排列
- 情况2：考虑分组，即分组内的物体被认为是相同的，假设n个物体被划分为 (j,k,m ...)， 那么他们的排列个数是：n! / (j! * k! * m! *...)
- 情况3：从n个物体中抽取k个，并且顺序相关，那么能够得到的排列个数为： P(n,k) = n! / (n - k)!
- 情况4: 从n个物体中抽取K个，并且不关注顺序，那么能得到的组合个数为：C(n,k) = n! / ( (n - k)! * k!)

# 第七章 几何分布、二项式分布、泊松分布：保持线性

*计算概率分布是一件很费时的事情，除非你知道它们的模式*

*我们假设所有事件都是独立*

* 几何分布(Geometric Distribution) 的使用场景：
    - 观察的事件之间彼此独立
    - 每个事件的结果只有成功和失败两种
    - 每次观察成功和失败的概率保持不变
    - 求解的问题是经过多少次观察才第一次出现成功的概率

* 如果一个事件的分布符合几何分布，那么我们记做 X ~ Geo(p), p为每次事件成功的概率

* 几何分布的计算公式：
    - 概率：
        - 第r次成功：P(X=r) = q^(r-1) * p， 其中p为成功的概率，q为不成功的概率 q=1-p
        - 至少经过r次成功：P(X>r) = q^r
        - 至多经过r次成功：P(X <= r) = 1 - P(x > r) = 1 - q^r
    - 期望值：E(x) = 1 / p, p为成功的概率。
    - 方差：Var(X) = q/p^2

* 二项式分布(Binomial Distribution)的使用场景：
    - 观察的事件之间彼此独立
    - 每个事件的结果只有成功和失败两种，并且成功和失败的概率保持不变
    - 求解的问题是：在n个事件中，有r个成功的概率

* 如果一个事件的分布符合二项式分布，那么我们记做X ~ B(n,p), n 为样本的总量，p为成功的概率。
* 二项式分布的概率计算公式：P(X=r)=C(n,r) * p^r * q^(n-r), 其中C(n,r)是从n个样本中取出r个的组合，p为成功的概率，q为失败的概率。q = 1 - p
* 二项式分布的期望：E(X) = np
* 二项式分布的方差：Var(X) = npq

* 泊松分布（Poisson Distrubition）
* 泊松分布的使用场景：
    - 观察的事件之间彼此独立
    - 事件发生在一段区间（时间或者距离）
    - 已知在一段时间内发生的平均值λ， 求在接下来的一段时间内时间发生r次的概率

* 如果一个分布符合泊松分布，那么记做 X ~ Po(λ)
* 泊松分布的计算公式：
    - 概率：P(X=x) = e^(-r) * λ^r / r!
    - 期望：E(X) = λ
    - 方差：Var(X) = λ
* 如果X,Y是独立事件， X~ Po(x), Y ~ Po(y), 那么 X+Y ~ Po(x+y)
* 对于二项式分布 X ~ B(n,p), 当n > 50, p < 0.1时，可以使用泊松分布来近似计算二项式分布。因为二项式分布包含了n!的计算。

# 第八章 正态分布(Normal)
*I just want to be normal*

* 正态分布是处理连续的分布，是最常见最重要的一个分布之一。
* 观察样本：
    - 连续分布：区间
    - 离散分布：单个数值
* 概率密度函数：用于衡量连续分布的概率的函数。密度函数告诉我们概率分布的图形。
* 对于连续分布：概率 = 面积。概率密度函数下面的面积必须等于1
* 正态分布的形状是中心对称的，像一个古代的大钟，因此又称为“钟形曲线”. 
![正态分布图](images/normal_distribution_shape.png)
* 正态分布用两个参数表示：μ 和 σ^2， μ 代表曲线的中线，方差决定了曲线的高低和宽窄。方差越大，说明分布越宽，曲线就越矮。随着取值偏离中线越远，正态分布的函数值无限逼近0，但是永远都不等于0.
* 标准正太分布：N(0,1), 均值为0， 方差为1
* 计算正态分布的概率三步走：
    - 计算出样本的平均值和方差
    - 计算出样本的标准分(z-scores)。计算标准差的过程就是将一个正态分布投射到标准正态分布Z ~ N(0,1)的过程。
    - 根据标准分查找标准正态分布概率表。正态分布可以查出 P(x < z)的概率。

* 变换：P(X > Z) = 1 - P(X < Z); P(a < X < b) = P(x < b) - P(x < a)

# 第九章 超越“平凡”

*生活就像一个过山车。如果能把它变得Normal就好了*

* 对于连续分布，以下公式也是适用的：
    E(X + Y) = E(X) + E(Y)
    E(X - Y) = E(X) - E(Y)
    VAR(X + Y) = VAR(X) + VAR(Y)
    VAR(X - Y) = VAR(X) + VAR(Y)

![正态分布的变换](images/normal_transformations.jpg)
* 正态分布可以用来对二项式分布近似求解：（前面讲过，什么时候可以用泊松分布来近似求解）
    - 如果X ~ B（N，P），那么当np > 5 而且 nq > 5时，可以使用正态分布 X ~ N(np,nq) 来近似求解。（要求pq比较接近0.5）
    - 连续校正：对于使用正态分布近似求解二项式分布，需要进行校正。校正的幅度为 正负1/2n
    - 口诀：小于等于含右边，大于等于含左边。小于不过左边，大于超过右边。例如，二项式分布中 P(X <=3) 相当于正态分布的 P(X < 3.5) 
* 正态分布可以用来对泊松分布进行近似求解（为什么？因为泊松分布的公式含有一个阶乘r!，而是用正态分布可以查表求解，方便。当然如果你使用计算机。。。）
    - 如果 X ~ Po(λ) 且当λ > 15时，可以使用正态分布X ~ N(λ,λ) 对泊松分布进行近似求解
    - 同样，也需要进行连续校正。校正的幅度为 正负1/2n。

# 第十章 数据取样

* 总体(population): 所有你要观察的，感兴趣的数据。
* 样本(sample): 样本中的一部分数据。样本的选取要尽量反映总体的分布情况。
* 随机选择样本（simpling sampling）：
    - 可以重复。上一次选择的样本会被放回总体中，下一次可以继续被选中。
    - 不可重复。每次选取的样本不再放回总体中。
* 分层抽样（stratified sampling）：将总体分成不同的组，例如按照颜色，然后在每组中抽取一样数目（或者按照比例）的样本组成总体的样本
* 巢式抽样（cluster sampling）：先将样本聚集成群，然后抽取其中的几个群。
* 分层抽样和巢式抽样的区别：分层抽样是将不同的组看起来很不一样，而巢式抽样是让每一组看起来尽量一样
* 系统抽样（systematic sampling）：按照一定的比例或者间隔抽取样本
* 抽样是一门艺术，上面的集中抽样方式能够减少特定产生样本偏差的可能，但是在某些特定的情况下，依然有可能出现。

# 第十一章：从样本推测（整体）

*古人云：见微知著*
* 对于一个总体，可以精确的“计算”出他的平均值和方差，但是对于样本，我们只能近似“估算”。
* 点估计量（point estimator): 用于从样本中估算总体的参数的公式
* 平均值估计量：等于样本的平均值。
* 方差估计量：等于样本中所有值减去样本的平均值的平方的和，再除以 n - 1





 


